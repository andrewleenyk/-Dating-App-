{"ast":null,"code":"(function webpackUniversalModuleDefinition(root, factory) {\n  if (typeof exports === 'object' && typeof module === 'object') module.exports = factory();else if (typeof define === 'function' && define.amd) define([], factory);else {\n    var a = factory();\n\n    for (var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n  }\n})(typeof self !== 'undefined' ? self : this, function () {\n  return (\n    /******/\n    function (modules) {\n      // webpackBootstrap\n\n      /******/\n      // The module cache\n\n      /******/\n      var installedModules = {};\n      /******/\n\n      /******/\n      // The require function\n\n      /******/\n\n      function __webpack_require__(moduleId) {\n        /******/\n\n        /******/\n        // Check if module is in cache\n\n        /******/\n        if (installedModules[moduleId]) {\n          /******/\n          return installedModules[moduleId].exports;\n          /******/\n        }\n        /******/\n        // Create a new module (and put it into the cache)\n\n        /******/\n\n\n        var module = installedModules[moduleId] = {\n          /******/\n          i: moduleId,\n\n          /******/\n          l: false,\n\n          /******/\n          exports: {}\n          /******/\n\n        };\n        /******/\n\n        /******/\n        // Execute the module function\n\n        /******/\n\n        modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n        /******/\n\n        /******/\n        // Flag the module as loaded\n\n        /******/\n\n        module.l = true;\n        /******/\n\n        /******/\n        // Return the exports of the module\n\n        /******/\n\n        return module.exports;\n        /******/\n      }\n      /******/\n\n      /******/\n\n      /******/\n      // expose the modules object (__webpack_modules__)\n\n      /******/\n\n\n      __webpack_require__.m = modules;\n      /******/\n\n      /******/\n      // expose the module cache\n\n      /******/\n\n      __webpack_require__.c = installedModules;\n      /******/\n\n      /******/\n      // define getter function for harmony exports\n\n      /******/\n\n      __webpack_require__.d = function (exports, name, getter) {\n        /******/\n        if (!__webpack_require__.o(exports, name)) {\n          /******/\n          Object.defineProperty(exports, name, {\n            /******/\n            configurable: false,\n\n            /******/\n            enumerable: true,\n\n            /******/\n            get: getter\n            /******/\n\n          });\n          /******/\n        }\n        /******/\n\n      };\n      /******/\n\n      /******/\n      // getDefaultExport function for compatibility with non-harmony modules\n\n      /******/\n\n\n      __webpack_require__.n = function (module) {\n        /******/\n        var getter = module && module.__esModule ?\n        /******/\n        function getDefault() {\n          return module['default'];\n        } :\n        /******/\n        function getModuleExports() {\n          return module;\n        };\n        /******/\n\n        __webpack_require__.d(getter, 'a', getter);\n        /******/\n\n\n        return getter;\n        /******/\n      };\n      /******/\n\n      /******/\n      // Object.prototype.hasOwnProperty.call\n\n      /******/\n\n\n      __webpack_require__.o = function (object, property) {\n        return Object.prototype.hasOwnProperty.call(object, property);\n      };\n      /******/\n\n      /******/\n      // __webpack_public_path__\n\n      /******/\n\n\n      __webpack_require__.p = \"\";\n      /******/\n\n      /******/\n      // Load entry module and return exports\n\n      /******/\n\n      return __webpack_require__(__webpack_require__.s = 0);\n      /******/\n    }\n    /************************************************************************/\n\n    /******/\n    ([\n    /* 0 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n        return typeof obj;\n      } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n\n      var _createClass = function () {\n        function defineProperties(target, props) {\n          for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];\n            descriptor.enumerable = descriptor.enumerable || false;\n            descriptor.configurable = true;\n            if (\"value\" in descriptor) descriptor.writable = true;\n            Object.defineProperty(target, descriptor.key, descriptor);\n          }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n          if (protoProps) defineProperties(Constructor.prototype, protoProps);\n          if (staticProps) defineProperties(Constructor, staticProps);\n          return Constructor;\n        };\n      }();\n\n      var _platform = __webpack_require__(1);\n\n      var platform = _interopRequireWildcard(_platform);\n\n      var _utils = __webpack_require__(2);\n\n      function _interopRequireWildcard(obj) {\n        if (obj && obj.__esModule) {\n          return obj;\n        } else {\n          var newObj = {};\n\n          if (obj != null) {\n            for (var key in obj) {\n              if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n            }\n          }\n\n          newObj.default = obj;\n          return newObj;\n        }\n      }\n\n      function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n          throw new TypeError(\"Cannot call a class as a function\");\n        }\n      }\n\n      var LaunchApp = function () {\n        function LaunchApp(options) {\n          _classCallCheck(this, LaunchApp);\n\n          this.onFailed = options.onFailed.bind(this);\n          this.downloadURL = options.downloadURL || {};\n          this._debug = options._debug || false;\n          this.timeoutToDownload = 0;\n          this.visibility = {\n            isInBackground: false,\n            hideTime: 0\n          };\n          this.bindVisibilityChange();\n        }\n\n        _createClass(LaunchApp, [{\n          key: 'log',\n          value: function log() {\n            if (this._debug) {\n              var _console;\n\n              (_console = console).log.apply(_console, arguments);\n            }\n          }\n        }, {\n          key: 'start',\n          value: function start() {\n            if (platform.isWx()) {\n              this.startInWechat();\n            } else if (platform.isQQ()) {\n              this.startInQQ();\n            } else {\n              this.openWithScheme();\n            }\n          }\n        }, {\n          key: 'startInWechat',\n          value: function startInWechat() {\n            this.log('startInWechat'); // 微信6.5.5禁止scheme直接拉起，只能调用微信api拉起\n\n            var ret = (0, _utils.versionCompare)(platform.getClientVersion(false), '6.5.5');\n            var open = void 0;\n\n            if (ret > 0) {\n              open = this.openWithWeixinJSBridge.bind(this);\n            } else {\n              open = this.openWithScheme.bind(this);\n            }\n\n            if (_typeof(window.WeixinJSBridge) === 'object' && typeof window.WeixinJSBridge.invoke === 'function') {\n              open();\n            } else {\n              (0, _utils.loadJS)('//res.wx.qq.com/open/js/jweixin-1.2.0.js');\n\n              if (document.addEventListener) {\n                document.addEventListener('WeixinJSBridgeReady', open, false);\n              } else if (document.attachEvent) {\n                document.attachEvent('WeixinJSBridgeReady', open);\n                document.attachEvent('onWeixinJSBridgeReady', open);\n              }\n            }\n          }\n        }, {\n          key: 'startInQQ',\n          value: function startInQQ() {\n            if (window.mqq) {\n              this.openWithMqq();\n            } else {\n              (0, _utils.loadJS)('//open.mobile.qq.com/sdk/qqapi.js?_bid=152', this.openWithMqq.bind(this));\n            }\n          }\n        }, {\n          key: 'bindVisibilityChange',\n          value: function bindVisibilityChange() {\n            var _this = this;\n\n            this.log('bindVisibilityChange');\n\n            var _getVisibilityChangeN = this.getVisibilityChangeName(),\n                visibilityChangeName = _getVisibilityChangeN.visibilityChangeName,\n                hiddenName = _getVisibilityChangeN.hiddenName;\n\n            var onHide = function onHide() {\n              _this.log('onHide');\n\n              _this.visibility.isInBackground = true;\n              _this.visibility.hideTime = new Date().getTime();\n            };\n\n            var onShow = function onShow() {\n              _this.log('onShow');\n\n              var timeoutToDownload = _this.timeoutToDownload,\n                  hideTime = _this.visibility.hideTime;\n              var showTime = new Date().getTime();\n\n              if (showTime - hideTime > 1500) {\n                _this.log('clearTimeout');\n\n                clearTimeout(timeoutToDownload);\n              }\n\n              _this.visibility.isInBackground = false;\n            };\n\n            if (hiddenName) {\n              document.addEventListener(visibilityChangeName, function (event) {\n                _this.log(event);\n\n                var isHidden = platform.isQQ() ? event.hidden : document[hiddenName];\n\n                if (isHidden) {\n                  onHide();\n                } else {\n                  onShow();\n                }\n              }, false);\n            } else {\n              window.addEventListener('blur', onHide(), false);\n              window.addEventListener('focus', onShow(), false);\n            }\n          }\n        }, {\n          key: 'getVisibilityChangeName',\n          value: function getVisibilityChangeName() {\n            var hiddenName = void 0,\n                visibilityChangeName = void 0;\n\n            if (document.hidden !== undefined) {\n              hiddenName = 'hidden';\n              visibilityChangeName = 'visibilitychange';\n            } else if (document.mozHidden !== undefined) {\n              hiddenName = 'mozHidden';\n              visibilityChangeName = 'mozvisibilitychange';\n            } else if (document.msHidden !== undefined) {\n              hiddenName = 'msHidden';\n              visibilityChangeName = 'msvisibilitychange';\n            } else if (document.webkitHidden !== undefined) {\n              hiddenName = 'webkitHidden';\n              visibilityChangeName = 'webkitvisibilitychange';\n            }\n\n            if (platform.isQQ()) {\n              visibilityChangeName = 'qbrowserVisibilityChange';\n            }\n\n            return {\n              hiddenName: hiddenName,\n              visibilityChangeName: visibilityChangeName\n            };\n          }\n        }, {\n          key: 'openWithScheme',\n          value: function openWithScheme() {\n            var _this2 = this;\n\n            var scheme = this.scheme;\n\n            function createLaunchIFrame(url) {\n              var iFrame = document.createElement('iframe');\n              iFrame.style.cssText = 'display:none;width:0px;height:0px;';\n              iFrame.src = url;\n              document.body.appendChild(iFrame);\n              return iFrame;\n            }\n\n            var iFrame = void 0;\n\n            if (platform.isIos()) {\n              setTimeout(function () {\n                window.location.href = scheme;\n              }, 500);\n            } else if (platform.isAndroid()) {\n              setTimeout(function () {\n                iFrame = createLaunchIFrame(scheme);\n              }, 500);\n            }\n\n            this.timeoutToDownload = setTimeout(function () {\n              iFrame && document.body.removeChild(iFrame);\n              !_this2.visibility.isInBackground && _this2.openFailedCallback();\n            }, 3000);\n          }\n        }, {\n          key: 'openWithMqq',\n          value: function openWithMqq(err) {\n            var _this3 = this;\n\n            if (err) {\n              return;\n            }\n\n            window.mqq.invokeURL(this.scheme);\n            this.timeoutToDownload = setTimeout(function () {\n              if (!_this3.visibility.isInBackground) _this3.openFailedCallback();\n            }, 3000);\n          }\n        }, {\n          key: 'openWithWeixinJSBridge',\n          value: function openWithWeixinJSBridge() {\n            var _this4 = this;\n\n            this.log('openWithWeixinJSBridge');\n\n            var launchApp = function launchApp() {\n              window.WeixinJSBridge.invoke('launchApplication', {\n                'schemeUrl': _this4.scheme,\n                'showLaunchFaildToast': false\n              }, function (res) {\n                if (/launchApplication:fail/.test(res.err_msg)) {\n                  _this4.openFailedCallback();\n                }\n              });\n            };\n\n            if (_typeof(window.WeixinJSBridge) === 'object' && typeof window.WeixinJSBridge.invoke === 'function') {\n              launchApp();\n            } else {\n              if (document.addEventListener) {\n                document.addEventListener('WeixinJSBridgeReady', launchApp, false);\n              } else if (document.attachEvent) {\n                document.attachEvent('WeixinJSBridgeReady', launchApp);\n                document.attachEvent('onWeixinJSBridgeReady', launchApp);\n              }\n            }\n          }\n        }, {\n          key: 'openFailedCallback',\n          value: function openFailedCallback() {\n            var onFailed = this.onFailed,\n                downloadURL = this.downloadURL;\n            onFailed && onFailed();\n\n            if (platform.isIos() && downloadURL.ios) {\n              window.location.href = downloadURL.ios;\n            } else if (platform.isAndroid() && downloadURL.android) {\n              window.location.href = downloadURL.android;\n            } else if (downloadURL.home) {\n              window.location.href = downloadURL.home;\n            }\n          }\n        }]);\n\n        return LaunchApp;\n      }();\n\n      exports.default = LaunchApp;\n      /***/\n    },\n    /* 1 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.isQQ = isQQ;\n      exports.isWx = isWx;\n      exports.isIos = isIos;\n      exports.isIpad = isIpad;\n      exports.isAndroid = isAndroid;\n      exports.isMobile = isMobile;\n      exports.getClientVersion = getClientVersion;\n      var ua = navigator.userAgent; // 检测是否为qq\n\n      function isQQ() {\n        return !!navigator.userAgent.match(/QQ\\//);\n      } // 检测是否为微信\n\n\n      function isWx() {\n        return !!navigator.userAgent.match(/micromessenger/i);\n      } // 检测是否为ios手机\n\n\n      function isIos() {\n        var REGEXP_IOS = /.*?(iPad|iPhone|iPod).*/;\n        return REGEXP_IOS.test(ua);\n      }\n\n      function isIpad() {\n        var REGEXP_IPAD = /.*?(iPad).*/;\n        return REGEXP_IPAD.test(ua);\n      } // 检测是否为安卓手机\n\n\n      function isAndroid() {\n        var REGXP_ANDROID = /.*(Android).*/;\n        return REGXP_ANDROID.test(ua);\n      } // 检测是否为移动浏览器\n\n\n      function isMobile() {\n        return !!(isAndroid() || isIos());\n      }\n\n      function getClientVersion(number) {\n        var mat = ua.match(/MicroMessenger\\/([\\d\\.]+)/i);\n        var version = void 0;\n\n        if (mat && mat.length > 1) {\n          version = mat[1];\n        }\n\n        if (!version) {\n          return 0;\n        }\n\n        return number ? version.replace(/\\./g, '') : version;\n      }\n      /***/\n\n    },\n    /* 2 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.loadJS = loadJS;\n      exports.versionCompare = versionCompare;\n\n      function loadJS(filename, callback) {\n        var script = document.createElement('script');\n        script.async = false;\n        script.src = filename;\n        script.addEventListener('load', function () {\n          script.parentNode.removeChild(script);\n          callback();\n        }, false);\n        script.addEventListener('error', function () {\n          script.parentNode.removeChild(script);\n          callback(new Error('loading script failed'));\n        }, false);\n        document.body.appendChild(script);\n      }\n\n      function versionCompare(versionCurr, versionNext) {\n        versionCurr = versionCurr.split('.');\n        versionNext = versionNext.split('.');\n        var len = Math.min(versionCurr.length, versionNext.length);\n\n        for (var i = 0; i < len; i++) {\n          var left = parseInt(versionCurr[i], 10) - parseInt(versionNext[i], 10);\n\n          if (left !== 0) {\n            return left;\n          }\n        }\n\n        return versionCurr.length - versionNext.length;\n      }\n      /***/\n\n    }\n    /******/\n    ])\n  );\n});","map":{"version":3,"sources":["/Users/drew/general_assembly/pawpaw/unit_4/week_12/WEB3-Blog/client/node_modules/launch-app/dist/index.js"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","a","i","self","modules","installedModules","__webpack_require__","moduleId","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","value","_typeof","Symbol","iterator","obj","constructor","_createClass","defineProperties","target","props","length","descriptor","writable","key","Constructor","protoProps","staticProps","_platform","platform","_interopRequireWildcard","_utils","newObj","default","_classCallCheck","instance","TypeError","LaunchApp","options","onFailed","bind","downloadURL","_debug","timeoutToDownload","visibility","isInBackground","hideTime","bindVisibilityChange","log","_console","console","apply","arguments","start","isWx","startInWechat","isQQ","startInQQ","openWithScheme","ret","versionCompare","getClientVersion","open","openWithWeixinJSBridge","window","WeixinJSBridge","invoke","loadJS","document","addEventListener","attachEvent","mqq","openWithMqq","_this","_getVisibilityChangeN","getVisibilityChangeName","visibilityChangeName","hiddenName","onHide","Date","getTime","onShow","showTime","clearTimeout","event","isHidden","hidden","undefined","mozHidden","msHidden","webkitHidden","_this2","scheme","createLaunchIFrame","url","iFrame","createElement","style","cssText","src","body","appendChild","isIos","setTimeout","location","href","isAndroid","removeChild","openFailedCallback","err","_this3","invokeURL","_this4","launchApp","res","test","err_msg","ios","android","home","isIpad","isMobile","ua","navigator","userAgent","match","REGEXP_IOS","REGEXP_IPAD","REGXP_ANDROID","number","mat","version","replace","filename","callback","script","async","parentNode","Error","versionCurr","versionNext","split","len","Math","min","left","parseInt"],"mappings":"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","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _platform = __webpack_require__(1);\n\nvar platform = _interopRequireWildcard(_platform);\n\nvar _utils = __webpack_require__(2);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar LaunchApp = function () {\n    function LaunchApp(options) {\n        _classCallCheck(this, LaunchApp);\n\n\n        this.onFailed = options.onFailed.bind(this);\n        this.downloadURL = options.downloadURL || {};\n        this._debug = options._debug || false;\n        this.timeoutToDownload = 0;\n        this.visibility = {\n            isInBackground: false,\n            hideTime: 0\n        };\n        this.bindVisibilityChange();\n    }\n\n    _createClass(LaunchApp, [{\n        key: 'log',\n        value: function log() {\n            if (this._debug) {\n                var _console;\n\n                (_console = console).log.apply(_console, arguments);\n            }\n        }\n    }, {\n        key: 'start',\n        value: function start() {\n            if (platform.isWx()) {\n                this.startInWechat();\n            } else if (platform.isQQ()) {\n                this.startInQQ();\n            } else {\n                this.openWithScheme();\n            }\n        }\n    }, {\n        key: 'startInWechat',\n        value: function startInWechat() {\n            this.log('startInWechat');\n            // 微信6.5.5禁止scheme直接拉起，只能调用微信api拉起\n            var ret = (0, _utils.versionCompare)(platform.getClientVersion(false), '6.5.5');\n            var open = void 0;\n            if (ret > 0) {\n                open = this.openWithWeixinJSBridge.bind(this);\n            } else {\n                open = this.openWithScheme.bind(this);\n            }\n            if (_typeof(window.WeixinJSBridge) === 'object' && typeof window.WeixinJSBridge.invoke === 'function') {\n                open();\n            } else {\n                (0, _utils.loadJS)('//res.wx.qq.com/open/js/jweixin-1.2.0.js');\n                if (document.addEventListener) {\n                    document.addEventListener('WeixinJSBridgeReady', open, false);\n                } else if (document.attachEvent) {\n                    document.attachEvent('WeixinJSBridgeReady', open);\n                    document.attachEvent('onWeixinJSBridgeReady', open);\n                }\n            }\n        }\n    }, {\n        key: 'startInQQ',\n        value: function startInQQ() {\n            if (window.mqq) {\n                this.openWithMqq();\n            } else {\n                (0, _utils.loadJS)('//open.mobile.qq.com/sdk/qqapi.js?_bid=152', this.openWithMqq.bind(this));\n            }\n        }\n    }, {\n        key: 'bindVisibilityChange',\n        value: function bindVisibilityChange() {\n            var _this = this;\n\n            this.log('bindVisibilityChange');\n\n            var _getVisibilityChangeN = this.getVisibilityChangeName(),\n                visibilityChangeName = _getVisibilityChangeN.visibilityChangeName,\n                hiddenName = _getVisibilityChangeN.hiddenName;\n\n            var onHide = function onHide() {\n                _this.log('onHide');\n                _this.visibility.isInBackground = true;\n                _this.visibility.hideTime = new Date().getTime();\n            };\n            var onShow = function onShow() {\n                _this.log('onShow');\n                var timeoutToDownload = _this.timeoutToDownload,\n                    hideTime = _this.visibility.hideTime;\n\n                var showTime = new Date().getTime();\n                if (showTime - hideTime > 1500) {\n                    _this.log('clearTimeout');\n                    clearTimeout(timeoutToDownload);\n                }\n                _this.visibility.isInBackground = false;\n            };\n            if (hiddenName) {\n                document.addEventListener(visibilityChangeName, function (event) {\n                    _this.log(event);\n                    var isHidden = platform.isQQ() ? event.hidden : document[hiddenName];\n                    if (isHidden) {\n                        onHide();\n                    } else {\n                        onShow();\n                    }\n                }, false);\n            } else {\n                window.addEventListener('blur', onHide(), false);\n                window.addEventListener('focus', onShow(), false);\n            }\n        }\n    }, {\n        key: 'getVisibilityChangeName',\n        value: function getVisibilityChangeName() {\n            var hiddenName = void 0,\n                visibilityChangeName = void 0;\n            if (document.hidden !== undefined) {\n                hiddenName = 'hidden';\n                visibilityChangeName = 'visibilitychange';\n            } else if (document.mozHidden !== undefined) {\n                hiddenName = 'mozHidden';\n                visibilityChangeName = 'mozvisibilitychange';\n            } else if (document.msHidden !== undefined) {\n                hiddenName = 'msHidden';\n                visibilityChangeName = 'msvisibilitychange';\n            } else if (document.webkitHidden !== undefined) {\n                hiddenName = 'webkitHidden';\n                visibilityChangeName = 'webkitvisibilitychange';\n            }\n            if (platform.isQQ()) {\n                visibilityChangeName = 'qbrowserVisibilityChange';\n            }\n            return { hiddenName: hiddenName, visibilityChangeName: visibilityChangeName };\n        }\n    }, {\n        key: 'openWithScheme',\n        value: function openWithScheme() {\n            var _this2 = this;\n\n            var scheme = this.scheme;\n\n            function createLaunchIFrame(url) {\n                var iFrame = document.createElement('iframe');\n                iFrame.style.cssText = 'display:none;width:0px;height:0px;';\n                iFrame.src = url;\n                document.body.appendChild(iFrame);\n                return iFrame;\n            }\n\n            var iFrame = void 0;\n            if (platform.isIos()) {\n                setTimeout(function () {\n                    window.location.href = scheme;\n                }, 500);\n            } else if (platform.isAndroid()) {\n                setTimeout(function () {\n                    iFrame = createLaunchIFrame(scheme);\n                }, 500);\n            }\n\n            this.timeoutToDownload = setTimeout(function () {\n                iFrame && document.body.removeChild(iFrame);\n                !_this2.visibility.isInBackground && _this2.openFailedCallback();\n            }, 3000);\n        }\n    }, {\n        key: 'openWithMqq',\n        value: function openWithMqq(err) {\n            var _this3 = this;\n\n            if (err) {\n                return;\n            }\n            window.mqq.invokeURL(this.scheme);\n            this.timeoutToDownload = setTimeout(function () {\n                if (!_this3.visibility.isInBackground) _this3.openFailedCallback();\n            }, 3000);\n        }\n    }, {\n        key: 'openWithWeixinJSBridge',\n        value: function openWithWeixinJSBridge() {\n            var _this4 = this;\n\n            this.log('openWithWeixinJSBridge');\n            var launchApp = function launchApp() {\n                window.WeixinJSBridge.invoke('launchApplication', {\n                    'schemeUrl': _this4.scheme,\n                    'showLaunchFaildToast': false\n                }, function (res) {\n                    if (/launchApplication:fail/.test(res.err_msg)) {\n                        _this4.openFailedCallback();\n                    }\n                });\n            };\n\n            if (_typeof(window.WeixinJSBridge) === 'object' && typeof window.WeixinJSBridge.invoke === 'function') {\n                launchApp();\n            } else {\n                if (document.addEventListener) {\n                    document.addEventListener('WeixinJSBridgeReady', launchApp, false);\n                } else if (document.attachEvent) {\n                    document.attachEvent('WeixinJSBridgeReady', launchApp);\n                    document.attachEvent('onWeixinJSBridgeReady', launchApp);\n                }\n            }\n        }\n    }, {\n        key: 'openFailedCallback',\n        value: function openFailedCallback() {\n            var onFailed = this.onFailed,\n                downloadURL = this.downloadURL;\n\n            onFailed && onFailed();\n            if (platform.isIos() && downloadURL.ios) {\n                window.location.href = downloadURL.ios;\n            } else if (platform.isAndroid() && downloadURL.android) {\n                window.location.href = downloadURL.android;\n            } else if (downloadURL.home) {\n                window.location.href = downloadURL.home;\n            }\n        }\n    }]);\n\n    return LaunchApp;\n}();\n\nexports.default = LaunchApp;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.isQQ = isQQ;\nexports.isWx = isWx;\nexports.isIos = isIos;\nexports.isIpad = isIpad;\nexports.isAndroid = isAndroid;\nexports.isMobile = isMobile;\nexports.getClientVersion = getClientVersion;\nvar ua = navigator.userAgent;\n\n// 检测是否为qq\nfunction isQQ() {\n    return !!navigator.userAgent.match(/QQ\\//);\n}\n\n// 检测是否为微信\nfunction isWx() {\n    return !!navigator.userAgent.match(/micromessenger/i);\n}\n\n// 检测是否为ios手机\nfunction isIos() {\n    var REGEXP_IOS = /.*?(iPad|iPhone|iPod).*/;\n    return REGEXP_IOS.test(ua);\n}\n\nfunction isIpad() {\n    var REGEXP_IPAD = /.*?(iPad).*/;\n    return REGEXP_IPAD.test(ua);\n}\n\n// 检测是否为安卓手机\nfunction isAndroid() {\n    var REGXP_ANDROID = /.*(Android).*/;\n    return REGXP_ANDROID.test(ua);\n}\n\n// 检测是否为移动浏览器\nfunction isMobile() {\n    return !!(isAndroid() || isIos());\n}\n\nfunction getClientVersion(number) {\n    var mat = ua.match(/MicroMessenger\\/([\\d\\.]+)/i);\n    var version = void 0;\n\n    if (mat && mat.length > 1) {\n        version = mat[1];\n    }\n\n    if (!version) {\n        return 0;\n    }\n\n    return number ? version.replace(/\\./g, '') : version;\n}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.loadJS = loadJS;\nexports.versionCompare = versionCompare;\nfunction loadJS(filename, callback) {\n    var script = document.createElement('script');\n    script.async = false;\n    script.src = filename;\n\n    script.addEventListener('load', function () {\n        script.parentNode.removeChild(script);\n        callback();\n    }, false);\n\n    script.addEventListener('error', function () {\n        script.parentNode.removeChild(script);\n        callback(new Error('loading script failed'));\n    }, false);\n    document.body.appendChild(script);\n}\n\nfunction versionCompare(versionCurr, versionNext) {\n    versionCurr = versionCurr.split('.');\n    versionNext = versionNext.split('.');\n\n    var len = Math.min(versionCurr.length, versionNext.length);\n\n    for (var i = 0; i < len; i++) {\n        var left = parseInt(versionCurr[i], 10) - parseInt(versionNext[i], 10);\n\n        if (left !== 0) {\n            return left;\n        }\n    }\n\n    return versionCurr.length - versionNext.length;\n}\n\n/***/ })\n/******/ ]);\n});"]},"metadata":{},"sourceType":"script"}